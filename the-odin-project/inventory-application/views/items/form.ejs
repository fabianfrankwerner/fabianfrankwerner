<div class="page-header">
    <h1 class="page-title"><%= title %></h1>
</div>

<div class="card">
    <form method="POST" action="<%= item ? `/items/${item.id}/update` : '/items/create' %>">
        <% if (errors && errors.length > 0) { %>
            <div class="alert alert-danger">
                <ul style="margin: 0; padding-left: 1.5rem;">
                    <% errors.forEach(error => { %>
                        <li><%= error %></li>
                    <% }); %>
                </ul>
            </div>
        <% } %>
        
        <div class="grid grid-2">
            <div class="form-group">
                <label for="name" class="form-label">Item Name *</label>
                <input 
                    type="text" 
                    id="name" 
                    name="name" 
                    class="form-control" 
                    value="<%= item ? item.name : '' %>"
                    required
                    maxlength="120"
                >
            </div>
            
            <div class="form-group">
                <label for="category_id" class="form-label">Category *</label>
                <select id="category_id" name="category_id" class="form-control" required>
                    <option value="">Select a category</option>
                    <% categories.forEach(category => { %>
                        <option 
                            value="<%= category.id %>" 
                            <%= (item && item.category_id == category.id) ? 'selected' : '' %>
                        >
                            <%= category.name %>
                        </option>
                    <% }); %>
                </select>
            </div>
        </div>
        
        <div class="form-group">
            <label for="description" class="form-label">Description</label>
            <textarea 
                id="description" 
                name="description" 
                class="form-control" 
                rows="4"
                placeholder="Optional description for this item"
            ><%= item ? item.description || '' : '' %></textarea>
        </div>
        
        <div class="grid grid-2">
            <div class="form-group">
                <label for="price" class="form-label">Price *</label>
                <input 
                    type="number" 
                    id="price" 
                    name="price" 
                    class="form-control" 
                    value="<%= item ? item.price : '' %>"
                    step="0.01"
                    min="0"
                    required
                >
            </div>
            
            <div class="form-group">
                <label for="stock_quantity" class="form-label">Stock Quantity *</label>
                <input 
                    type="number" 
                    id="stock_quantity" 
                    name="stock_quantity" 
                    class="form-control" 
                    value="<%= item ? item.stock_quantity : '0' %>"
                    min="0"
                    required
                >
            </div>
        </div>
        
        <div class="form-group">
            <label for="image_url" class="form-label">Image URL</label>
            <input 
                type="url" 
                id="image_url" 
                name="image_url" 
                class="form-control" 
                value="<%= item ? item.image_url || '' : '' %>"
                placeholder="https://example.com/image.jpg"
            >
        </div>
        
        <div class="d-flex gap-2">
            <button type="submit" class="btn btn-primary">
                <%= item ? 'Update Item' : 'Create Item' %>
            </button>
            <a href="/items" class="btn btn-secondary">Cancel</a>
        </div>
    </form>
</div>
