<div class="page-header d-flex justify-between align-center">
  <div>
    <h1 class="page-title"><%= item.name %></h1>
    <p>
      Category:
      <a href="/categories/<%= item.category_id %>"
        ><%= item.category_name %></a
      >
    </p>
  </div>
  <div class="d-flex gap-2">
    <a href="/items/<%= item.id %>/update" class="btn btn-warning">Edit Item</a>
    <form
      method="POST"
      action="/items/<%= item.id %>/delete"
      style="display: inline"
      onsubmit="return confirm('Are you sure you want to delete this item?')"
    >
      <button type="submit" class="btn btn-danger">Delete Item</button>
    </form>
  </div>
</div>

<div class="grid grid-2">
  <div class="card">
    <div class="card-header">
      <h2 class="card-title">Item Image</h2>
    </div>
    <div class="text-center">
      <% if (item.image_url) { %>
      <img
        src="<%= item.image_url %>"
        alt="<%= item.name %>"
        class="item-detail-image"
      />
      <% } else { %>
      <div
        class="item-detail-image"
        style="
          background-color: #e9ecef;
          display: flex;
          align-items: center;
          justify-content: center;
          color: #6c757d;
          margin: 0 auto;
        "
      >
        <div>
          <div style="font-size: 3rem">ðŸ“¦</div>
          <div>No Image Available</div>
        </div>
      </div>
      <% } %>
    </div>
  </div>

  <div class="card">
    <div class="card-header">
      <h2 class="card-title">Item Details</h2>
    </div>
    <div>
      <p><strong>Name:</strong> <%= item.name %></p>
      <p>
        <strong>Category:</strong>
        <a href="/categories/<%= item.category_id %>"
          ><%= item.category_name %></a
        >
      </p>
      <p>
        <strong>Description:</strong> <%= item.description || 'No description'
        %>
      </p>
      <p>
        <strong>Price:</strong>
        <span class="price">$<%= parseFloat(item.price).toFixed(2) %></span>
      </p>
      <p>
        <strong>Stock Quantity:</strong>
        <% if (item.stock_quantity === 0) { %>
        <span class="stock-low">Out of Stock</span>
        <% } else if (item.stock_quantity <= 5) { %>
        <span class="stock-medium"><%= item.stock_quantity %></span>
        <% } else { %>
        <span class="stock-ok"><%= item.stock_quantity %></span>
        <% } %>
      </p>
      <p>
        <strong>Created:</strong> <%= new Date(item.created_at).toLocaleString()
        %>
      </p>
      <p>
        <strong>Last Updated:</strong> <%= new
        Date(item.updated_at).toLocaleString() %>
      </p>
    </div>
  </div>
</div>

<div class="mt-3">
  <a href="/items" class="btn btn-secondary">Back to Items</a>
  <a href="/categories/<%= item.category_id %>" class="btn btn-primary"
    >View Category</a
  >
</div>
